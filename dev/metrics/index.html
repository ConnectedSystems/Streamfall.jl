<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Included metrics · Streamfall Documentation</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Streamfall Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Streamfall Documentation</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Streamfall.jl Documentation</a></li><li><a class="tocitem" href="../primer/">Primer</a></li><li><a class="tocitem" href="../network/">Defining a network</a></li><li><span class="tocitem">Nodes</span><ul><li><a class="tocitem" href="../Node/">Generic node methods</a></li><li><a class="tocitem" href="../IHACRES/">IHACRES</a></li><li><a class="tocitem" href="../HyMod/">HyMod</a></li><li><a class="tocitem" href="../GR4J/">GR4J</a></li><li><a class="tocitem" href="../Dam/">Dam (Storage Level)</a></li></ul></li><li><a class="tocitem" href="../use_methods/">Methods to run a network or node</a></li><li class="is-active"><a class="tocitem" href>Included metrics</a></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-7-1" type="checkbox"/><label class="tocitem" for="menuitem-7-1"><span class="docs-label">Calibration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../calibration_setup/">Calibration setup</a></li><li><a class="tocitem" href="../calibration/">Example calibration</a></li></ul></li><li><a class="tocitem" href="../simple_showcase/">A simple example</a></li><li><a class="tocitem" href="../model_comparison/">Model comparison example</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Included metrics</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Included metrics</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/master/docs/src/metrics.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Included-metrics"><a class="docs-heading-anchor" href="#Included-metrics">Included metrics</a><a id="Included-metrics-1"></a><a class="docs-heading-anchor-permalink" href="#Included-metrics" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="Streamfall.ADJ_R2-Tuple{Any, Any, Int64}" href="#Streamfall.ADJ_R2-Tuple{Any, Any, Int64}"><code>Streamfall.ADJ_R2</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Adjusted R^2</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li><li><code>p::Int</code> : number of explanatory variables</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L137-L144">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.BKGE-Tuple{Any, Any}" href="#Streamfall.BKGE-Tuple{Any, Any}"><code>Streamfall.BKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Bounded KGE, bounded between -1 and 1.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L349-L355">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.BmKGE-Tuple{Any, Any}" href="#Streamfall.BmKGE-Tuple{Any, Any}"><code>Streamfall.BmKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Bounded modified KGE between -1 and 1.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L459-L465">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.BnpKGE-Tuple{Any, Any}" href="#Streamfall.BnpKGE-Tuple{Any, Any}"><code>Streamfall.BnpKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Bounded non-parametric KGE between -1 and 1.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L565-L571">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.EV-Tuple{Any, Any}" href="#Streamfall.EV-Tuple{Any, Any}"><code>Streamfall.EV</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">EV(obs, sim)</code></pre><p>Explained Variance.</p><p>Indicates the amount of variation in the observations which the predictions are able to explain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L209-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.KGE-Tuple{Any, Any}" href="#Streamfall.KGE-Tuple{Any, Any}"><code>Streamfall.KGE</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">KGE(obs::Vector, sim::Vector; scaling::Tuple=nothing)::Float64</code></pre><p>Calculate the 2009 Kling-Gupta Efficiency (KGE) metric.</p><p>Decomposes NSE into correlation (<code>r</code>), relative variability (<code>α</code>), and bias (<code>β</code>) terms.</p><p>A KGE score of 1 means perfect fit. A score &lt; -0.41 indicates that the mean of observations provides better estimates (see Knoben et al., [2]).</p><p>The <code>scaling</code> argument expects a three-valued tuple which scales <code>r</code>, <code>α</code> and <code>β</code> factors respectively. If not specified, defaults to <code>1</code>.</p><p>Note: Although similar, NSE and KGE cannot be directly compared.</p><p><strong>References</strong></p><ol><li><p>Gupta, H.V., Kling, H., Yilmaz, K.K., Martinez, G.F., 2009.  Decomposition of the mean squared error and NSE performance criteria:  Implications for improving hydrological modelling.  Journal of Hydrology 377, 80–91.  https://doi.org/10.1016/j.jhydrol.2009.08.003</p></li><li><p>Knoben, W.J.M., Freer, J.E., Woods, R.A., 2019.  Technical note: Inherent benchmark or not? Comparing Nash-Sutcliffe and Kling-Gupta efficiency scores (preprint).  Catchment hydrology/Modelling approaches.  https://doi.org/10.5194/hess-2019-327</p></li><li><p>Mizukami, N., Rakovec, O., Newman, A.J., Clark, M.P., Wood, A.W.,  Gupta, H.V., Kumar, R., 2019.  On the choice of calibration metrics for “high-flow”      estimation using hydrologic models.  Hydrology and Earth System Sciences 23, 2601–2614.  https://doi.org/10.5194/hess-23-2601-2019</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L286-L321">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.LME-Tuple{Any, Any}" href="#Streamfall.LME-Tuple{Any, Any}"><code>Streamfall.LME</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Liu Mean Efficiency metric (LME).</p><p>Reformulation of the KGE metric said to be advantageous for capturing extreme flow events.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li></ul><p><strong>References</strong></p><ol><li>Liu, D., 2020.  A rational performance criterion for hydrological model.  Journal of Hydrology 590, 125488.  https://doi.org/10.1016/j.jhydrol.2020.125488</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L588-L603">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.MAE-Tuple{Any, Any}" href="#Streamfall.MAE-Tuple{Any, Any}"><code>Streamfall.MAE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Mean Absolute Error</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L152-L154">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.ME-Tuple{Any, Any}" href="#Streamfall.ME-Tuple{Any, Any}"><code>Streamfall.ME</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Mean Error</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L158-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.NKGE-Tuple{Any, Any}" href="#Streamfall.NKGE-Tuple{Any, Any}"><code>Streamfall.NKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Normalized KGE between 0 and 1.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L361-L367">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.NNSE-Tuple{Any, Any}" href="#Streamfall.NNSE-Tuple{Any, Any}"><code>Streamfall.NNSE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Normalized Nash-Sutcliffe Efficiency score (bounded between 0 and 1).</p><p><strong>References</strong></p><ol><li>Nossent, J., Bauwens, W., 2012.  Application of a normalized Nash-Sutcliffe efficiency to improve the accuracy of the Sobol’ sensitivity analysis of a hydrological model.  EGU General Assembly Conference Abstracts 237.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L114-L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.NSE-Tuple{Any, Any}" href="#Streamfall.NSE-Tuple{Any, Any}"><code>Streamfall.NSE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>The Nash-Sutcliffe Efficiency score</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.NSE_logbias-Tuple{Any, Any}" href="#Streamfall.NSE_logbias-Tuple{Any, Any}"><code>Streamfall.NSE_logbias</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">NSE_logbias(obs, sim; metric::Function=NSE, bias_threshold::Float64=5.0, shape::Float64=2.5)</code></pre><p>The NSE_logbias meta-metric provides a weighted combination of a least-squares approach and a logarithmic function of bias. The metric penalizes predictions with an overall bias above a threshold (defined as 5% in [1]).</p><p>It is also referred to as the Viney F score.</p><p><strong>Extended help</strong></p><p>The penalty applied is non-symmetrical (or multiplicatively symmetrical) in that predictions that are <em>double</em> the observed are penalized identically to predictions that are <em>half</em> the observed volume.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : Historic observations to compare against</li><li><code>sim::Vector</code> : Modeled time series</li><li><code>metric::Function</code> : least-squares method to use, defaults to NSE</li><li><code>bias_threshold::Float64</code> : Bias threshold after which the score given by <code>metric</code> is penalized, defaults to 5 (%)</li><li><code>shape::Float64</code> : Exponent value controlling shape of penalization (see Figure 2 in [1]).</li></ul><p><strong>References</strong></p><ol><li><p>Viney, N. R., Perraud, J., Vaze, J., Chiew, F.H.S., Post, D.A., Yang, A. 2009  The usefulness of bias constraints in model calibration for regionalisation      to ungauged catchments  18th World IMACS / MODSIM Congress, Cairns, Australia, 13 - 17 July 2009  Available at:  https://www.researchgate.net/publication/294697092<em>The</em>usefulness<em>of</em>bias<em>constraints</em>in<em>model</em>calibration<em>for</em>regionalisation<em>to</em>ungauged_catchments</p></li><li><p>Teng, J., Potter, N.J., Chiew, F.H.S., Zhang, L., Wang, B., Vaze, J., Evans, J.P., 2015.  How does bias correction of regional climate model precipitation affect modelled runoff?  Hydrology and Earth System Sciences 19, 711–728.  https://doi.org/10.5194/hess-19-711-2015</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L245-L278">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.NmKGE-Tuple{Any, Any}" href="#Streamfall.NmKGE-Tuple{Any, Any}"><code>Streamfall.NmKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Normalized modified KGE between 0 and 1.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L471-L477">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.NnpKGE-Tuple{Any, Any}" href="#Streamfall.NnpKGE-Tuple{Any, Any}"><code>Streamfall.NnpKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Normalized non-parametric KGE between 0 and 1.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L577-L583">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.PBIAS-Tuple{Any, Any}" href="#Streamfall.PBIAS-Tuple{Any, Any}"><code>Streamfall.PBIAS</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">PBIAS(obs::Vector, sim::Vector)::Float64</code></pre><p>Percent bias between <code>sim</code> and <code>obs</code></p><p>Model performance for streamflow can be determined to be satisfactory if the Nash-Sutcliffe Efficiency (NSE) score &gt; 0.5, the RMSE standard deviation ratio (RSR) &lt; 0.7 and percent bias (PBIAS) is +/- 25% (see [1]).</p><p><strong>References</strong></p><ol><li>Moriasi, D.N., Arnold, J.G., Liew, M.W.V., Bingner, R.L.,  Harmel, R.D., Veith, T.L., 2007.  Model Evaluation Guidelines for Systematic Quantification  of Accuracy in Watershed Simulations.  Transactions of the ASABE 50, 885–900.  https://doi.org/10.13031/2013.23153</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L164-L181">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.R2-Tuple{Any, Any}" href="#Streamfall.R2-Tuple{Any, Any}"><code>Streamfall.R2</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Coefficient of determination (R^2)</p><p>Aliases <code>NSE()</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L128-L132">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.RMSE-Tuple{Any, Any}" href="#Streamfall.RMSE-Tuple{Any, Any}"><code>Streamfall.RMSE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Root Mean Square Error</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L124">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.RSR-Tuple{Any, Any}" href="#Streamfall.RSR-Tuple{Any, Any}"><code>Streamfall.RSR</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">RSR(obs::Vector, sim::Vector)::Float64</code></pre><p>The RMSE-observations standard deviation ratio (RSR).</p><p>Varies between 0 and a large positive value, where 0 indicates an RMSE value of 0.</p><p><strong>References</strong></p><ol><li>Moriasi, D.N., Arnold, J.G., Liew, M.W.V., Bingner, R.L.,  Harmel, R.D., Veith, T.L., 2007.  Model Evaluation Guidelines for Systematic Quantification  of Accuracy in Watershed Simulations.  Transactions of the ASABE 50, 885–900.  https://doi.org/10.13031/2013.23153</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L185-L200">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.inverse_metric-Tuple{Any, Any, Function}" href="#Streamfall.inverse_metric-Tuple{Any, Any, Function}"><code>Streamfall.inverse_metric</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">inverse_metric(obs, sim; metric, comb_method::Function=mean)</code></pre><p>A meta-objective function which combines the performance of the given metric as applied to the discharge and the inverse of the discharge.</p><p>By default, the combination method is to take the mean.</p><p><strong>Arguments</strong></p><ul><li>obs : observed</li><li>sim : modeled results</li><li><code>metric::Function</code> : objective function</li><li><code>comb_method::Function</code> : mean</li><li>ϵ : offset value to use (enables use with zero-flow time steps), defaults to 1e-2</li></ul><p><strong>References</strong></p><ol><li>Garcia, F., Folton, N., Oudin, L., 2017.  Which objective function to calibrate rainfall–runoff models      for low-flow index simulations?  Hydrological Sciences Journal 62, 1149–1166.  https://doi.org/10.1080/02626667.2017.1308511</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L663-L686">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.mKGE-Tuple{Any, Any}" href="#Streamfall.mKGE-Tuple{Any, Any}"><code>Streamfall.mKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Calculate the modified KGE metric (2012).</p><p>Also known as KGE prime (KGE&#39;).</p><p><strong>Extended help</strong></p><p>It is not recommended to apply KGE&#39; with log-transformed flows (see [2]). Numerical instabilities arise as flow approaches values close to zero. This is possible under extreme dry conditions or by chance when sub-sampling.</p><p>In cases where observations are constant or otherwise displays zero variance or zero mean flow, this implementation applies a simple logistic function (ℯ⁻ˣ) to gain an  indication of simulated data&#39;s distance to zero.</p><p>This is to:</p><ul><li>avoid NaNs influencing subsequent calculations </li><li>allow use with split methods which may partition streamflows into periods of 0 flows.</li></ul><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code>: observations</li><li><code>sim::Vector</code> : modeled results</li><li><code>scaling::Tuple</code> : scaling factors in order of timing (r), magnitude (β), variability (γ).                    Defaults to (1,1,1).</li></ul><p><strong>References</strong></p><ol><li><p>Kling, H., Fuchs, M., Paulin, M., 2012.  Runoff conditions in the upper Danube basin under an ensemble of climate change scenarios.  Journal of Hydrology 424–425, 264–277.  https://doi.org/10.1016/j.jhydrol.2012.01.011</p></li><li><p>Santos, L., Thirel, G., Perrin, C., 2018.  Technical note: Pitfalls in using log-transformed flows within the KGE criterion.  Hydrology and Earth System Sciences 22, 4583–4591.  https://doi.org/10.5194/hess-22-4583-2018</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L372-L407">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.mean_NmKGE-Tuple{Any, Any}" href="#Streamfall.mean_NmKGE-Tuple{Any, Any}"><code>Streamfall.mean_NmKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Mean Inverse NmKGE</p><p>Said to produce better fits for low-flow indices compared to mKGE (see [1]).</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled results</li><li><code>scaling::Tuple</code> : scaling factors for r, α, and β (defaults to 1.0)</li><li><code>ϵ::Float64</code> : small constant to use with inverse flow to allow consideration of periods with no flow. Defaults to 1e-2.</li></ul><p><strong>References</strong></p><ol><li>Garcia, F., Folton, N., Oudin, L., 2017.  Which objective function to calibrate rainfall–runoff      models for low-flow index simulations?  Hydrological Sciences Journal 62, 1149–1166.  https://doi.org/10.1080/02626667.2017.1308511</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L482-L500">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.naive_split_metric-Tuple{Any, Any}" href="#Streamfall.naive_split_metric-Tuple{Any, Any}"><code>Streamfall.naive_split_metric</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Naive approach to split metrics.</p><p>Split metrics are a meta-objective optimization approach which &quot;splits&quot; data into subperiods. The objective function is calculated for each subperiod and then recombined. The approach addresses the lack of consideration of dry years with least-squares.</p><p>In Fowler et al., [1] the subperiod is one year. The implementation offered here is &quot;naive&quot; in that the data is partitioned into <code>N</code> chunks of <code>n_members</code> and does not consider date/time.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : Historic observations to compare against</li><li><code>sim::Vector</code> : Modeled time series</li><li><code>n_members::Int</code> : number of members per chunk (i.e., sub-samples), defaults to 365</li><li><code>metric::Function</code> : Objective function to apply, defaults to NNSE</li><li><code>comb_method::Function</code> : Recombination method, defaults to <code>mean</code></li></ul><p><strong>References</strong></p><ol><li>Fowler, K., Peel, M., Western, A., Zhang, L., 2018.  Improved Rainfall-Runoff Calibration for Drying Climate: Choice of Objective Function.  Water Resources Research 54, 3392–3408.  https://doi.org/10.1029/2017WR022466</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L633-L657">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.npKGE-Tuple{Any, Any}" href="#Streamfall.npKGE-Tuple{Any, Any}"><code>Streamfall.npKGE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Calculate the non-parametric Kling-Gupta Efficiency (KGE) metric.</p><p><strong>Arguments</strong></p><ul><li><code>obs::Vector</code> : observations</li><li><code>sim::Vector</code> : modeled</li><li><code>scaling::Tuple</code> : scaling factors for timing (s), variability (α), magnitude (β)</li></ul><p><strong>References</strong></p><ol><li>Pool, S., Vis, M., Seibert, J., 2018.  Evaluating model performance: towards a non-parametric variant of the Kling-Gupta efficiency.  Hydrological Sciences Journal 63, 1941–1953.  https://doi.org/10.1080/02626667.2018.1552002</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L504-L518">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.relative_skill_score-Tuple{Float64, Float64}" href="#Streamfall.relative_skill_score-Tuple{Float64, Float64}"><code>Streamfall.relative_skill_score</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Relative Skill Score.</p><p>Provides an indication of model performance relative to a known benchmark score.</p><p>Suitable for use with least-squares approaches that provide skill scores ranging from 1 to -∞.</p><p><strong>Arguments</strong></p><ul><li><code>Sb</code> : Benchmark score</li><li><code>Sm</code> : Model score</li></ul><p><strong>References</strong></p><ol><li>Knoben, W.J.M., Freer, J.E., Woods, R.A., 2019.  Technical note: Inherent benchmark or not?      Comparing Nash-Sutcliffe and Kling-Gupta efficiency scores (preprint).  Catchment hydrology/Modelling approaches.  https://doi.org/10.5194/hess-2019-327</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L222-L239">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.skill_score-Tuple{Any, Any}" href="#Streamfall.skill_score-Tuple{Any, Any}"><code>Streamfall.skill_score</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Allows comparison of any model compared against a pre-defined benchmark, assuming both scores were obtained with the same objective function.</p><p>Positive values indicate a model is better than the benchmark, and negative values indicate a model performs worse.</p><p><strong>Extended help</strong></p><p>It is noted in Knoben et al., [1] that the skill score should always be contextualized with the original benchmark value. Interpreting skill scores by themselves may become difficult if the benchmark score is already quite high. A small improvement of no real practical value could be misconstrued as a large improvement. As an example, if the benchmark has an KGE score of 0.999 and its counterpart 0.9995, then a skill score of 0.5 will be reported.</p><p><strong>References</strong></p><ol><li><p>Knoben, W.J.M., Freer, J.E., Woods, R.A., 2019.   Technical note: Inherent benchmark or not? Comparing Nash-Sutcliffe and Kling-Gupta efficiency scores (preprint).   Catchment hydrology/Modelling approaches.   https://doi.org/10.5194/hess-2019-327</p></li><li><p>Towner, J., Cloke, H.L., Zsoter, E., Flamig, Z., Hoch, J.M., Bazo, J., Coughlan de Perez, E., Stephens, E.M., 2019.   Assessing the performance of global hydrological models for capturing peak river flows in the Amazon basin.   Hydrology and Earth System Sciences 23, 3057–3080.   https://doi.org/10.5194/hess-23-3057-2019</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L692-L715">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.@bound-Tuple{Any}" href="#Streamfall.@bound-Tuple{Any}"><code>Streamfall.@bound</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Bounds given metric between -1.0 and 1.0, where 1.0 is perfect fit.</p><p>Suitable for use with any metric that ranges from 1 to -∞.</p><p><strong>References</strong></p><ol><li>Mathevet, T., Michel, C., Andréassian, V., Perrin, C., 2006.  A bounded version of the Nash-Sutcliffe criterion for better model  assessment on large sets of basins.  IAHS-AISH Publication 307, 211–219.  https://iahs.info/uploads/dms/13614.21–211-219-41-MATHEVET.pdf</li></ol><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; import Streamfall: @bound, KGE
julia&gt; @bound KGE([1,2], [3,2])
-0.35653767993482094</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L5-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.@mean_inverse" href="#Streamfall.@mean_inverse"><code>Streamfall.@mean_inverse</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Applies mean inverse approach to a metric.</p><p>Suitable for use with any metric that ranges from 1 to -∞.</p><p>If using with other macros such as <code>@normalize</code> or <code>@bound</code>, these must come first.</p><p><strong>References</strong></p><ol><li>Garcia, F., Folton, N., Oudin, L., 2017.  Which objective function to calibrate rainfall–runoff      models for low-flow index simulations?  Hydrological Sciences Journal 62, 1149–1166.  https://doi.org/10.1080/02626667.2017.1308511</li></ol><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; import Streamfall: @normalize, @mean_inverse, KGE
julia&gt; @normalize @mean_inverse KGE [1,2] [3,2] 1e-6
0.3193506006429825</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L53-L74">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.@normalize-Tuple{Any}" href="#Streamfall.@normalize-Tuple{Any}"><code>Streamfall.@normalize</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Normalizes given metric between 0.0 and 1.0, where 1.0 is perfect fit.</p><p>Suitable for use with any metric that ranges from 1 to -∞.</p><p><strong>References</strong></p><ol><li>Nossent, J., Bauwens, W., 2012.  Application of a normalized Nash-Sutcliffe efficiency to improve the  accuracy of the Sobol’ sensitivity analysis of a hydrological model.  EGU General Assembly Conference Abstracts 237.</li></ol><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; import Streamfall: @normalize, KGE
julia&gt; @normalize KGE([1,2], [3,2])
0.1111111111111111</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L30-L47">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Streamfall.@split" href="#Streamfall.@split"><code>Streamfall.@split</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Applies split meta metric approach</p><p>If using with other macros such as <code>@normalize</code> or <code>@bound</code>, these must come first.</p><p><strong>References</strong></p><ol><li>Fowler, K., Peel, M., Western, A., Zhang, L., 2018.  Improved Rainfall-Runoff Calibration for Drying Climate:  Choice of Objective Function.  Water Resources Research 54, 3392–3408.  https://doi.org/10.1029/2017WR022466</li></ol><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using Statistics
julia&gt; import Streamfall: @normalize, @split, KGE
julia&gt; @normalize @split KGE repeat([1,2], 365) repeat([3,2], 365) 365 mean
0.3217309561946589</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ConnectedSystems/Streamfall.jl/blob/82f0bb32f91e85f39c330f707e446587093bcf2f/src/metrics.jl#L83-L103">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../use_methods/">« Methods to run a network or node</a><a class="docs-footer-nextpage" href="../calibration_setup/">Calibration setup »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Wednesday 3 November 2021 05:04">Wednesday 3 November 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
